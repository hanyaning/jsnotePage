$(function(){webPage.start([{title:"文件(F)",menuItem:[{title:"新建(N)",shortcut:"Ctrl+N",enabled:!0},{title:"新窗口(W)",shortcut:"Ctrl+Shift+N",enabled:!0},{title:"打开(O)...",shortcut:"Ctrl+O",enabled:!0},{title:"保存(S)",shortcut:"Ctrl+S",enabled:!0},{title:"另存为(A)",shortcut:"Ctrl+Shift+S",enabled:!0},{title:"hr",shortcut:"",enabled:!0},{title:"页面设置(U)",shortcut:"",enabled:!0},{title:"打印(P)",shortcut:"Ctrl+P",enabled:!0},{title:"hr",shortcut:"",enabled:!0},{title:"退出(X)",shortcut:"",enabled:!0}],width:"202px",left:"0px"},{title:"编辑(E)",menuItem:[{title:"撤销(U)",shortcut:"Ctrl+Z",enabled:!1},{title:"hr",shortcut:"",enabled:!0},{title:"剪切(T)",shortcut:"Ctrl+X",enabled:!1},{title:"复制(C)",shortcut:"Ctrl+C",enabled:!1},{title:"粘贴(V)",shortcut:"Ctrl+V",enabled:!0},{title:"删除(L)",shortcut:"Del",enabled:!1},{title:"hr",shortcut:"",enabled:!0},{title:"使用Bing搜索",shortcut:"Ctrl+E",enabled:!0},{title:"查找(F)...",shortcut:"Ctrl+F",enabled:!0},{title:"查找下一个(N)",shortcut:"F3",enabled:!0},{title:"查找上一个(V)",shortcut:"Shift+F3",enabled:!0},{title:"替换(R)...",shortcut:"Ctrl+H",enabled:!0},{title:"转到(G)...",shortcut:"Ctrl+G",enabled:!0},{title:"hr",shortcut:"",enabled:!0},{title:"全选(A)",shortcut:"Ctrl+A",enabled:!0},{title:"时间/日期(D)",shortcut:"F5",enabled:!0}],width:"218px",left:"52px"},{title:"格式(O)",menuItem:[{title:"自动换行(W)",shortcut:"",enabled:!0},{title:"字体(F)...",shortcut:"",enabled:!0}],width:"156px",left:"106px"},{title:"查看(V)",menuItem:[{title:"缩放(Z)",shortcut:"",enabled:!0},{title:"状态栏",shortcut:"",enabled:!0}],width:"138px",left:"162px"},{title:"帮助(H)",menuItem:[{title:"查看帮助(H)",shortcut:"",enabled:!0},{title:"发送反馈(F)",shortcut:"",enabled:!0},{title:"hr",shortcut:"",enabled:!0},{title:"关于记事本(A)",shortcut:"",enabled:!0}],width:"166px",left:"216px"}]),textArea.createTextArea()});var webPage=function(){var o=$('<div class="web_bar"></div>'),c=[],d=-1;return{start:function(t){!function(e){for(var n=$('<ul class="menu-title"></ul>'),t=0;t<e.length;t++)!function(t){var l=$('<li class="title"></li>');l.html(e[t].title),l.attr("id",t),n.append(l),l.click(function(t){var e=Number(l.attr("id"));d=-1===d?(c[e].css("display","inline-block"),e):d!==e?(c[d].css("display","none"),c[e].css("display","inline-block"),e):(c[d].css("display","none"),-1),t.stopPropagation()}),l.hover(function(){if(-1!==d){var t=Number(l.attr("id"));c[d].css("display","none"),c[t].css("display","inline-block"),d=t}})}(t);o.append(n)}(t),function(t){for(var e=0;e<t.length;e++){var l=$('<ul class="munelist"></ul>');content=t[e].menuItem;for(var n=0;n<content.length;n++)if("hr"!==content[n].title){var i=$('<li class="menu-item"></li>');if(i.html(content[n].title),i.attr("id",e),i.attr("y",n),""!==content[n].shortcut){var s=$('<span class="shortcut"></span>');s.html(content[n].shortcut),i.append(s)}content[n].enabled||i.addClass("disable"),l.append(i),i.click(function(t){if(t.stopPropagation(),!$(this).hasClass("disabled")){var e=Number($(this).attr("id")),l=Number($(this).attr("y"));console.log(e,l),c[e].css("display","none"),d=-1,2===e&&1===l&&(fontList.show({okHandler:function(t){console.log(t)}}),c[e].css("display","none"),d=-1)}})}else{var a=$('<li class="menu-hr"></li>');l.append(a)}l.css({width:t[e].width,left:t[e].left,display:"none"}),o.append(l),c.push(l)}}(t),$("body").append(o)}}}(),textArea=function(){var t=$('<div class="textArea"><textarea  id="textArea" contenteditable="true" spellcheck="false"></textarea></div>'),e=t.find("textarea");return{createTextArea:function(){$("body").append(t),e.trigger("focus")}}}();function FontDiv(){var i,l=$('<div class="listBox"><input class="content" type="type"><br><ul class="selectList"></ul></div>'),n=l.find(".content"),s=l.find(".selectList"),a={container:"",list:[],select:0,width:"200px",isFont:!1,isFontStyle:!1,selectHandler:null};function e(){var t,e=$(a.container).find(".listBox");0!==e.length&&e.remove(),$(a.container).append(l),l.css("width",a.width),function(){if(a.isFont)for(var t=0;t<a.list.length;t++){(e=$('<li class="item"></li>')).css("font-family",a.list[t]),e.html(a.list[t]),s.append(e)}else if(a.isFontStyle)for(t=0;t<a.list.length;t++){(e=$('<li class="item"></li>')).html(a.list[t]),l=e,n=a.list[t],"常规"!==a.style?"斜体"!==n?"粗体"!==n?"粗偏斜体"!==n||l.css({"font-weight":"bold","font-style":"italic"}):l.css({"font-weight":"bold","font-style":"normal"}):l.css({"font-weight":"normal","font-style":"italic"}):l.css({"font-weight":"normal","font-style":"normal"}),s.append(e)}else for(t=0;t<a.list.length;t++){var e;(e=$('<li class="item"></li>')).html(a.list[t]),s.append(e)}var l,n;i=s.find(".item")}(),t=a.select,$(i[t]).addClass("selected"),n.val(a.list[t]),n.select()}this.show=function(t){$.extend(a,t),e(),s.click(function(t){$(i[a.select]).removeClass("selected"),a.select=a.list.indexOf($(t.target).html()),$(i[a.select]).addClass("selected"),n.val(a.list[a.select]),n.select(),a.selectHandler(a.select)}),n.keyup(function(){var t=0;for(t=0;t<a.list.length&&0!==a.list[t].indexOf(n.val());t++);t!==a.list.length&&(i[t].scrollIntoView({behavior:"smooth",block:"start"}),$(i[a.select]).removeClass("selected"),$(i[t]).addClass("selected"),a.select=t)})}}var fontList=function(){var i=$('<div class="notepad-dlg-mask notepad-dlg-font"><div class="dialogbox notepad-dlgbox"><div class="notepad-dlg-titlebar"><p class="title">字体</p><span class="close-btn" title="关闭">✖</span></div><div class="main notepad-dlg-main"><div class="font-family"><p>字体(F):</p></div><div class="font-style"><p>字形(Y):</p></div><div class="font-size"><p>大小(S):</p></div><fieldset class="sample"><legend>示例</legend><p class="sample-txt">AaBbYyZz</p></fieldset><div class="script"><label>脚本(R):<br><select><option value="西欧语言">西欧语言</option><option value="中文 GB2312">中文 GB2312</option></select></label></div><input class="btn-ok btn" type="button" value="确定"><input class="btn-cancel btn" type="button" value="取消"></div></div></div>'),s=i.find(".btn-ok"),a=i.find(".close-btn"),o=i.find(".btn-cancel"),t=i.find(".sample-txt"),c=i.find(".notepad-dlg-titlebar"),d={family:"Arial",style:"常规",size:"16",okHandler:null};function r(){t.css({"font-family":d.family,"font-size":d.size+"pt"}),"常规"!==d.style?"斜体"!==d.style?"粗体"!==d.style?"粗偏斜体"!==d.style||t.css({"font-weight":"bold","font-style":"italic"}):t.css({"font-weight":"bold","font-style":"normal"}):t.css({"font-weight":"normal","font-style":"italic"}):t.css({"font-weight":"normal","font-style":"normal"})}function f(){i.remove()}return{show:function(t){var e,l,n;$.extend(d,t),$("body").append(i),e=["Agency FB","Algerian","Arial","Arial Rounded MT","Axure Handwriting","Bahnschrift","Baskerville Old Face","Bauhaus 93","Bell MT","Berlin Sans FB","Bernard MT","BlackAdder ITC"],l=["常规","斜体","粗体","粗偏斜体"],n=["8","9","10","11","12","14","16","18","20","22","24","26","28","36","48","72"],(new FontDiv).show({container:".notepad-dlg-font .font-family",width:"176px",list:e,isFont:!0,selectHandler:function(t){d.family=e[t],r()}}),(new FontDiv).show({container:".notepad-dlg-font .font-style",select:3,width:"132px",list:l,isFontStyle:!0,selectHandler:function(t){d.style=l[t],r()}}),(new FontDiv).show({container:".notepad-dlg-font .font-size",width:"64px",list:n,selectHandler:function(t){d.size=n[t],r()}}),r(),i.find(".dialogbox").draggable({handle:c}),a.click(f),o.click(f),s.click(f),s.click(function(){d.okHandler({family:d.family,style:d.style,size:d.size}),f()}),i.click(function(t){t.stopPropagation()})}}}();